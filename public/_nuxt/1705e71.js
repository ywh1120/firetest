(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{697:function(e,r,t){"use strict";t.r(r);var n=t(694),c=t(155),o=t(231),l=t(645),_=t(652),m=t(230),d=t(642),v=t(690),f=t(629),h=t(2),k=t(39),j=(t(111),t(5),t(10),t(153)),x=t(661),O=t.n(x),w={data:function(){return{res_num:"",res_name:"",res_desc:"",res_id:"",desc_items:[],time_items:[],reading_items:["판독","의뢰","폐소"],entire_reservate:[],reservate1:[],reservate2:[],reservate3:[],rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}]}},mounted:function(){this.read_Desc(),this.read_Time()},methods:{read_Desc:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function r(){var q;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.desc_items=[],q=Object(j.i)(Object(j.b)(e.$db,"description"),Object(j.h)("desc","asc")),r.next=4,Object(j.f)(q);case 4:r.sent.forEach((function(r){var t=r.data();e.desc_items.push(t.desc)}));case 6:case"end":return r.stop()}}),r)})))()},read_Time:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function r(){var q;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.time_items=[],q=Object(j.i)(Object(j.b)(e.$db,"time")),r.next=4,Object(j.f)(q);case 4:r.sent.forEach((function(r){var t=r.data();"Y"===t.use&&e.time_items.push(t.time)})),e.read_reservate(e.time_items);case 7:case"end":return r.stop()}}),r)})))()},read_reservate:function(e){var r=this;e.forEach((function(time){var e={time:time,res_desc:"",res_name:"",res_num:"",res_id:"",res_reading:"",res_comment:"",mri_num:""},t={time:time,res_desc:"",res_name:"",res_num:"",res_id:"",res_reading:"",res_comment:"",mri_num:""},n={time:time,res_desc:"",res_name:"",res_num:"",res_id:"",res_reading:"",res_comment:"",mri_num:""};r.reservate1.push(e),r.reservate2.push(t),r.reservate3.push(n)})),this.entire_reservate.push(this.reservate1),this.entire_reservate.push(this.reservate2),this.entire_reservate.push(this.reservate3)},reservate_mri:function(e,r){var t=this;return Object(k.a)(regeneratorRuntime.mark((function n(){var c,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=O()().format("YYYY.MM.DD"),o="mri"+r+"_"+e.time,n.prev=2,n.next=5,Object(j.j)(Object(j.d)(t.$db,"reservate",c),Object(h.a)({},o,{time:e.time,res_desc:e.res_desc,res_name:e.res_name,res_num:e.res_num,res_id:t.$cookies.get("login").id,res_reading:e.res_reading,res_comment:e.res_comment,mri_num:r}),{merge:!0});case 5:n.next=9;break;case 7:n.prev=7,n.t0=n.catch(2);case 9:case"end":return n.stop()}}),n,null,[[2,7]])})))()},reservate_cancel:function(){}}},$=t(110),component=Object($.a)(w,(function(){var e=this,r=e._self._c;return r("div",[r(_.a,[r(d.a,e._l(e.entire_reservate,(function(t,_){return r(l.a,{key:_,attrs:{cols:"6"}},[r(o.a,{staticClass:"pa-1",attrs:{outlined:""}},[r(m.a,_<2?[e._v("\n                    MRI #"+e._s(_+1)+" \n                    ")]:[e._v("\n                    TCD\n                    ")])],1),e._v(" "),e._l(t,(function(t,h){return r(l.a,{key:h},[r(o.a,{staticClass:"pa-1",attrs:{outlined:""}},[r(d.a,[r(l.a,{attrs:{cols:"auto","align-self":"center"}},[r(m.a,[e._v(" "+e._s(t.time)+" ")])],1),e._v(" "),r(l.a,{attrs:{cols:"2","align-self":"center"}},[r(f.a,{attrs:{label:"환자번호",placeholder:"환자번호나 공백입력",elevation:"3",outlined:"","hide-details":"auto",rules:e.rules,dense:""},model:{value:t.res_num,callback:function(r){e.$set(t,"res_num",r)},expression:"reserve.res_num"}})],1),e._v(" "),r(l.a,{attrs:{cols:"2","align-self":"center"}},[r(f.a,{attrs:{label:"예약자성함",placeholder:"이름입력",elevation:"3",outlined:"","hide-details":"",dense:""},model:{value:t.res_name,callback:function(r){e.$set(t,"res_name",r)},expression:"reserve.res_name"}})],1),e._v(" "),r(l.a,{attrs:{cols:"3","align-self":"center"}},[r(v.a,{staticClass:"inline select-box",attrs:{items:e.desc_items,label:"검사명",elevation:"3",dense:"","full-width":"",solo:"","hide-details":""},model:{value:t.res_desc,callback:function(r){e.$set(t,"res_desc",r)},expression:"reserve.res_desc"}})],1),e._v(" "),r(l.a,{attrs:{cols:"3"}},[r(n.a,{attrs:{items:e.reading_items,label:"판독",multiple:""},model:{value:t.res_reading,callback:function(r){e.$set(t,"res_reading",r)},expression:"reserve.res_reading"}})],1),e._v(" "),r(l.a,{attrs:{cols:"2","align-self":"center"}},[r(f.a,{attrs:{label:"메모",placeholder:"메모입력",elevation:"3",outlined:"","hide-details":"",dense:""},model:{value:t.res_comment,callback:function(r){e.$set(t,"res_comment",r)},expression:"reserve.res_comment"}})],1),e._v(" "),r(l.a,{attrs:{cols:"auto","align-self":"center"}},[r(m.a,[e._v(" "+e._s(""==t.res_id?"예약없음":t.res_id)+" ")])],1),e._v(" "),r(l.a,{attrs:{cols:"auto","align-self":"center"}},[r(c.a,{attrs:{color:"primary",elevation:"3"},on:{click:function(r){return e.reservate_mri(t,_+1)}}},[e._v("예약")])],1),e._v(" "),r(l.a,{attrs:{cols:"auto","align-self":"center"}},[r(c.a,{attrs:{color:"error",elevation:"3"},on:{click:function(r){return e.reservate_cancel()}}},[e._v("취소")])],1)],1)],1)],1)}))],2)})),1)],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);